# 20200618

## DB

###  인덱스

*  인덱스는 특정 컬럼 값을 가지고 있는 열 혹은 값을 빠르게 찾기 위해서 사용된다.
* MySQL은 첫번째 열부터 전체 테이블을 걸쳐서 연관된 열을 검색하기 때문에 테이블이 크면 클수록 비용이 엄청나게 늘어난다.
* 만약 테이블이 쿼리에 있는 컬럼에 대한 인덱스를 가지고 있다면 모든 데이터를 조사하지 않고도 데이터 파일의 중간에서 검색위치를 빠르게 잡아낼 수 있다.
* 인덱스 위주 검색 후 관련된 혹은 원하는 데이터들을 가져올 수 있다고 생각할 수도 있다.

###  트랜잭션

*  데이터베이스의 상태를 변화시키기 위해서 수행하는 작업의 단위
*  작업 수행의 논리적인 단

### ACID

*  원자성\(Atomicity\)
  * 트랜잭션의 작업이 부분적으로 실행되거나 중단되지 않는 것을 보장하는 것
  * 즉, All or Nothing의 개념으로 작업 단위를 일부분만 실행하지 않는다는 것을 의미한다.
* 일관성\(Consistency\)
  * 트랙잭션이 성공적으로 완료되면 일관적인 DB 상태를 유지하는 것을 말한다.
  * 즉, 트랜잭션이 성공했을 경우 기존의 기본키/외래키 같은 무결성 제약 조건이 충족 되어야 한다.
    * Primary Key는 유일해야 한다
    * 데이터베이스는 참조 무결성을 가져야 하며, 이는 레코드가 참조하는 객체는 반드시 존재해야 한다는 의미다.
    * 어떤 데이터 값은 특정 봄위 내에 있어야 한다.
* 격리성\(Isolation\)
  * 트랜잭션이 수행시 다른 트랜잭션의 작업이 끼어들지 못하도록 보장하는 것을 말한다.
  * 즉, 트랜잭션끼리는 서로 간섭할 수 없다.
* 지속성\(Durability\)
  * 성공적으로 수행된 트랜잭션은 영원히 반영이 되는 것을 말한다.
  * commit을 하면 현재 상태는 영원히 보장
  * 트랜잭션이 성공적으로 완료된 후에는 다른 트랜잭션에 의해 변경되기 전까지 소프트웨어 혹은 하드웨어적인 장애가 발생되는 한이 있더라도 변하지 않고 보존된다.

###  원자성 보장

 트랜잭션을 수행하기 이전의 상태를 따로 저장해놓고 트랜잭션을 수행하다가 오류가 생기면 현재 내역을 다 날려버리고 임시 저장했던 상태로 되돌림

### 일관성 보장

 트랜잭션에서 일관성은 트랜잭션 수행 전, 후에 데이터 모델의 모든 제약 조건\(기본키, 외래키, 도메인, 도메인 제약조건 등\)을 만족하는 것을 통해 보장한다.

###  고립성 보장

 세마포어와 비슷한 개념으로 lock & excute unlock을 통해 고립성을 보장할 수 있다. 즉, 데이터를 읽거나 쓸 때 문을 잠궈서 다른 트랜잭션이 접근하지 못하도록 고립성을 보장하고, 수행을 마치면 unlock을 통해 데이터를 다른 트랜잭션이 접근할 수 있도록 허용하는 방식이다.



