# 20200610

## 프로그램, 프로세스, 스레드

프로그램 : 실행될 수 있는 실행 파일 저장소에 존재하는 코드의 뭉치로 실행 상태가 아닌 실행하기 전에 저장소에 저장된 코드들이다.

프로세스 : 메모리에 올라와서 실행중인 프로그램 저장소에 존재하는 프로그램이 컴퓨터가 실행해서 CPU가 처리할 수 있게 메인메모리에 올라온 상태.

스레드 : 프로세스 내의 실행 흐름의 단위 프로세스 안에 있는 작은 실행단위로 프로세스의 HEAP 영역, DATA 영역과 CODE 영역은 공유하고 스레드 각자의 스택을 갖는다.

## 메모리 영역

### code

코드, 상수 코드 자체를 구성하는 메모리 역역\(프로그램 명령\)

### data

전역변수, 정적변수

### heap

프로그래머가 할당/해제하는 메모리 공간 malloc\(\) 또는 new 연산자를 통해 할당 free\(\) 또는 delete 연산자를 통해서만 해제 Java에서는 가비지 컬렉터가 자동으로 해제

### stack

지역변수, 매개변수

### 메모리 영역을 나눈 이유

최대한 데이터를 공유하여 메모리 사용량을 줄이기 위해. CODE 영역과 DATA 영역은 프로그램에서 모두 같으므로 따로 관리하여 공유하면 메모리 사용량을 줄일 수 있음.

## 멀티프로그래밍, 멀티프로세싱, 멀티스레딩, 멀티태스킹

멀티프로그래밍 - 하나의 프로그램만 메모리에 올라가 CPU가 처리할 수 있다. 이런 과정에서 프로그램이 파일 입출력을하게 되면 중간에 idle\(정지\) 상태가 되는데 이 떄 다른 프로세스의 일부를 실행시키는 것을 의미한다.

멀티프로세싱 - 하나의 컴퓨터에 여러개의 CPU를 장착하고 하나 이상의 프로세스들을 동시에 처리하는 것을 의미

멀티스레딩 - 프로세스내에서 하나의 스레드가 아닌 여러개의 스레드를 형성하여 명령어들을 처리하는 것을 의미

멀티태스킹 - 여러개의 프로세스들을 빠르게 번갈아가면서 처리하여 동시에 처리되는 것처럼 보이는 것을 의미

## 멀티 스레드

### 멀티 스레드 사용 이유

1. 메모리 공간과 시스템 자원 소모가 줄어들게 된다.
2. 데이터 역역, 힙 영역, 코드 영역을 공유하기 때문에 메모리 공간이 효율적이고, 문맥 교환도 프로세스간 문맥 교환보다 훨씬 빠르다.

### 멀티 스레드 문제점

1. 서로 다른 쓰레드가 데이터와 힙 영역을 공유하기 때문에 어떤 쓰레드가 다른 쓰레드에서 사용중인 변수나 자료 구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다.
2. 따라서 동기화 작업을 통해 공유 자원에 대한 접근을 제어해야된다. 

## 20200611 스터디 준비

### 운영체제

### 주제 : 데드락 1. 데드락이란?

* 프로세스가 자원을 얻지 못해서 다음 처리를 하지 못하는 상태.
* 프로세스가 자원을 가지고 있으면서 서로에게 할당된 자원을 요구하며 무한정 대기

1. 데드락 발생 조건
2. 상호 배제 : 자원에 하나의 프로세스만 접근 가능
3. 점유 대기 : 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용하고 있는 자원을 추가로 점유하기 위해 대기
4. 비선점 : 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없음
5. 순환 대기 : 프로세스의 집합에서 순환 형태로 자원을 대기하고 있어야 함
6. 데드락 처리

### 예방

교착상태 발생 조건 중 하나를 제거하여 해결한다.\(자원 낭비가 심함\)

### 회피

데드락에 빠질 가능성이 있는지 없는지 운영체제가 검사하고 빠질 가능성이 없을 경우에만 자원을 할당함으로써 문제 발생을 피함

EX\) 은행원 알고리즘 : 운영체제는 안전상태를 유지할 수 있는 요구만 수락하고, 불안전 상태를 초래할 사용자의 요구는 나중에 만족될 수 있을 때까지 계속 거절 MAX CURRENT P1 10 5 P2 4 2 P3 9 2

총 자원 12

현재 자원을 9만큼 쓰고있기 때문에 3이 남아있음. 이때 P1이나 P3에 3의 자원을 주게되면 불안전상태가 된다. P2에 2를 주면 P2가 완료되고 자원을 반남하여 남은 자원은 5가 된다. 이때 다시 P3에 자원을 주면 또 불안전상태가 된다. 따라서 P1에 자원 5를 주게되면 P1이 완료되고 자원을 반남하여 P3로 완료할수 있게 된다.

은행원 알고리즘 단점

* 항상 불안전 상태를 방지해야 하므로 자원 이용도가 낮다.
* 할당할 수 있는 자원의 수가 일정해야 한다.
* 최대 자원 요구량을 미리 알아야한다.

-&gt; 오버헤드가 너무 큼

### 회복

교착 상태를 일으킨 프로세스를 종료하거나, 할당된 자원을 해제시켜 회복시키는 방법

프로세스 종료 방법

* 교착상태의 프로세스를 모두 중지
* 교착상태가 제거될 때까지 하나씩 프로세스 중지

자원 선점 방법

* 교착상태의 프로세스가 점유하고 있는 자원을 선점해 다른 프로세스에게 할당\(해당 프로세스 일시정지 시킴\)
* 우선 순위가 낮은 프로세스나 수행 횟수가 적은 프로세스 위주로 프로세스 자원 선점

## 네트워크

### 주제 : http 프로토콜

1. http 프로토콜이란? 인터넷 상에서 클라이언트와 서버간에 요청/응답으로 데이터를 주고 받기 위한 프로토콜 클라이언트\(웹 브라우저\)가 서버\(웹 서버\)로 특정 웹 페이지를 요청하면 웹 서버가 해당 페이지의 내용을 html 형식으로 응답한다. 이때, http 요청에 포함되는 http메소드는 요청의 종류를 서버에게 알려주기 위해 사용한다. http 메소드는 get, post, put, delete, head, options, trace 등이 있다.
2. GET 메소드? GET은 서버로부터 정보를 조회하기 위해 설계된 메소드이다. GET은 요청을 전송할 때 필요한 데이터를 body에 담지 않고, 쿼리스트링을 통해 전송한다. ex\) www.exampleurl.com/resources?name1=val1&name2=val2

GET을 사용하는 경우 데이터가 노출되어 보안에 취약할 수 있으며, URL의 길이가 정해져있어 많은 양의 정보를 전달할 수 없다.

     3. POST 메소드? POST는 GET과 달리 리소스를 생성/변경하기 위해 설계되었기 때문에 전송해야 될 데이터를 HTTP 메세지의 BODY에 담아서 전송한다.

데이터가 BODY로 전송되고 내용이 눈에 보이지 않아 GET보다 보안적인 면에서 안전하다고 생각할 수 있지만 POST 요청도 개발자 도구 등으로 내용을 확인할 수 있으므로, 민감한 데이터의 경우에는 암호화하여 전송해야 한다.

BODY는 길이의 제한없이 대용량 데이터를 전송가능

POST로 요청을 보낼 때는 요청 헤더의 Content-Type에 요청 데이터의 타입을 표시해야 한다.

     4. http 패킷 주고받는 과정

1. client는 server와 3 방향 handshake\(연결지향, 신뢰성\) 과정을 통해 연결을 성립
2. 연결 성립 수 client는 server에게 get 방식으로 http 요청
3. server는 client에게 index.html 전송

     5. 3 way handshake

1. client가 server에게 접속을 요청하는 syn 전송 : server야 잘 들림?
2. server는 client로부터 syn요청을 받고 요청을 수락한다는 ack와 syn 패킷 전송 : 응 잘 들림. client는 잘 들림?
3. client는 server에거 ack을 보내고 이후로부터는 연결이 이루어지고 데이터가 오가게 되는 것.

